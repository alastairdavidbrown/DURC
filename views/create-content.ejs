<!DOCTYPE html>
<html lang="en">

<head>
	<title>Starter Template for Bootstrap</title>
	<script src="/fragment.js"></script>
	<div data-fragment="/head-frag.html"></div>
</head>

<body>

	<!-- insert the navbar -->
	<div data-fragment="/nav-bar-frag.html"></div>
	
	<div class="well"></div>

	<!-- set the page size and work out what page to display -->
	<% var pageSize=6 %>
	<% var pageRequested=query.page %>
	<% if (typeof pageRequested === "undefined")pageRequested=1; %>
	<% var startRow=pageSize*(pageRequested-1) %>
	<% var endRow=(content.length < startRow+pageSize ?  content.length : startRow+pageSize) %>
	<% var pages=(Math.ceil(content.length/pageSize)) %>

	
	<div class="container">
		<!-- Single button -->
		<div class="btn-group">
  			<button type="button" class="btn btn-default dropdown-toggle" 
					data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Content Type<span class="caret"></span>
  			</button>
		  <ul class="dropdown-menu">
			<li><a href="/create-content/event">Events</a></li>
			<li><a href="/create-content/community">Community</a></li>
 			<li><a href="/create-content/vision">Vision</a></li>

		  </ul>
		</div>
		<div class="table-responsive">
			
			<table class="table table-hover">
			
				<thead>
					<tr>
						<th>Heading</th>
						<th>Content</th>
					</tr>
				</thead>
				<tbody>
					<% for(var i=startRow; i<endRow; i++) { %>
						<tr>
							<td>
								<%=content[i].heading %>
							</td>
							<td>
								<%=content[i].content %>
							</td>
							<td>
								<a href="/content-edit/<%=content[i].id%>"><span class="glyphicon glyphicon-edit"></span>Edit..</a>
							</td>
							<td>
								<a href="/content-delete/<%=content[i].id%>"<span class="glyphicon glyphicon-trash"></span>Delete</a>
							</td>
						<tr>
					<% } %>	
					
					<!-- The New Row Inout -->
					<form id="content" class="form-horizontal" method="post">

						<tr>
							
							<td>
								<input id="heading" name="heading" type="text" placeholder="Heading" class="form-control">
							</td>
							<td>
								<input id="content" name="content" type="text" placeholder="Content" class="form-control">
							</td>
							<td>
								<input id="type" name="type" type="text" value="<%=type%>" class="hide">
							</td>
							<td>
								<button type="submit" class="btn btn-primary btn-sm">Submit</button>
							</td>
						</tr>
					
					</form>		
					
		
				</tbody>
			</table>
		</div>
		
		<!-- pagination control -->
		<% if(content.length > pageSize ) { %>
			<ul class="pagination">
				<% if (pageRequested == 1 ) { %>
					<li class="disabled"><a href="#">&laquo;</a></li>
				<% }else { %>
					<li><a href="?page=<%=pageRequested-1%>">&laquo;</a></li>
				<% } %>
				<% for (var i = 1; i<= pages; i++) { %> 
					<% if (i == pageRequested) { %>
						<li class="active"> <a href="?page=<%= i %>"> <%= i %> </a></li>	
					<% }else{ %>
						<li> <a href="?page=<%= i %>"> <%= i %> </a></li>
					<% } %>
				<% } %>
				
				<% if (pageRequested == pages ) { %>
					<li class="disabled"> <a href="#"> &raquo;</a></li>
				<% }else { %>
					<li><a href="?page=<%=Number(pageRequested)+1%>">&raquo;</a></li>
				<% } %>
				
				
				
			</ul>
		<% } %>
	</div>
	<!-- Bootstrap core JavaScript
        ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="/dist/js/bootstrap.min.js"></script>

	<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
	<script src="/assets/js/ie10-viewport-bug-workaround.js"></script>

</body>